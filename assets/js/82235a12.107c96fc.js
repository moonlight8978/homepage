(self.webpackChunkmoonlight_8978_github_io=self.webpackChunkmoonlight_8978_github_io||[]).push([[9219],{3905:function(e,t,a){"use strict";a.d(t,{Zo:function(){return u},kt:function(){return d}});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=p(a),d=l,k=c["".concat(s,".").concat(d)]||c[d]||m[d]||i;return a?n.createElement(k,r(r({ref:t},u),{},{components:a})):n.createElement(k,r({ref:t},u))}));function d(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=a.length,r=new Array(i);r[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:l,r[1]=o;for(var p=2;p<i;p++)r[p]=a[p];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},2355:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return o},metadata:function(){return s},toc:function(){return p},default:function(){return m}});var n=a(2122),l=a(9756),i=(a(7294),a(3905)),r=["components"],o={title:"AWS Elastic Compute Cloud (EC2)",code:"N/A"},s={unversionedId:"aws-developer-associated/ec2",id:"aws-developer-associated/ec2",isDocsHomePage:!1,title:"AWS Elastic Compute Cloud (EC2)",description:"Overview",source:"@site/books/aws-developer-associated/ec2.md",sourceDirName:"aws-developer-associated",slug:"/aws-developer-associated/ec2",permalink:"/books/aws-developer-associated/ec2",editUrl:"https://github.com/moonlight8978/moonlight8978.github.io/edit/v2/books/books/aws-developer-associated/ec2.md",version:"current",lastUpdatedAt:1624004023,formattedLastUpdatedAt:"6/18/2021",frontMatter:{title:"AWS Elastic Compute Cloud (EC2)",code:"N/A"},sidebar:"tutorialSidebar",previous:{title:"DynamoDB",permalink:"/books/aws-developer-associated/dynamo-db"},next:{title:"Elastic Container Service",permalink:"/books/aws-developer-associated/ecs"}},p=[{value:"Overview",id:"overview",children:[]},{value:"Instance types",id:"instance-types",children:[]},{value:"Instance Profile",id:"instance-profile",children:[]},{value:"Placement groups",id:"placement-groups",children:[]},{value:"User data",id:"user-data",children:[]},{value:"Metadata",id:"metadata",children:[]},{value:"Purchase options",id:"purchase-options",children:[]},{value:"Elastic Block Store (EBS)",id:"elastic-block-store-ebs",children:[{value:"EBS",id:"ebs",children:[]},{value:"EC2 Instance Store",id:"ec2-instance-store",children:[]},{value:"Multi-attach",id:"multi-attach",children:[]}]},{value:"Elastic File System (EFS)",id:"elastic-file-system-efs",children:[]}],u={toc:p};function m(e){var t=e.components,a=(0,l.Z)(e,r);return(0,i.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"overview"},"Overview"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Elastic Compute Cloud \u2192 ECC \u2192 EC2"),(0,i.kt)("li",{parentName:"ul"},"Things can be configured:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"CPU, RAM (All instances use ECC RAM), Network (Public IP, Network speed)"),(0,i.kt)("li",{parentName:"ul"},"Storage (SSD)"),(0,i.kt)("li",{parentName:"ul"},"Firewall (Security Group)"),(0,i.kt)("li",{parentName:"ul"},"Bootstrap script (User Data):",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Run at the instance first start. Once run, it never run again."),(0,i.kt)("li",{parentName:"ul"},"Run with the root user")))))),(0,i.kt)("h2",{id:"instance-types"},"Instance types"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Mac: Mac machine to build/test/develop iOS app")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"T4g:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Busrtable general purpose"),(0,i.kt)("li",{parentName:"ul"},"Arm-based AWS Graviton2 CPU (Custom built AWS Graviton2 Processor with 64-bit Arm Neoverse cores)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Unlimited mode by default"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"EBS-optimized by default"),(0,i.kt)("li",{parentName:"ul"},"Network bandwidth: Up to 5Gbps"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"T3:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Burstable general purpose"),(0,i.kt)("li",{parentName:"ul"},"2.5 GHz Intel Xeon Scalable Processor"),(0,i.kt)("li",{parentName:"ul"},"Unlimited mode by default"),(0,i.kt)("li",{parentName:"ul"},"EBS optimized"),(0,i.kt)("li",{parentName:"ul"},"Network bandwidth: Up to 5Gbps"),(0,i.kt)("li",{parentName:"ul"},"AWS Nito System, Xeon => 30% price performance improvement over T2 instances"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"T3a:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Burstable general purpose"),(0,i.kt)("li",{parentName:"ul"},"AMD EPYC 7000 series processors with an all core turbo clock speed of 2.5 GHz"),(0,i.kt)("li",{parentName:"ul"},"Unlimited mode by default"),(0,i.kt)("li",{parentName:"ul"},"AWS Nitro System"),(0,i.kt)("li",{parentName:"ul"},"EBS optimized"),(0,i.kt)("li",{parentName:"ul"},"Network: Up to 5Gbps"),(0,i.kt)("li",{parentName:"ul"},"Deliver up to 10% cost savings over comparable instance types"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"T2:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Burstable performance"),(0,i.kt)("li",{parentName:"ul"},"High frequency Intel Xeon processors (3.0 ~ 3.3GHz)"),(0,i.kt)("li",{parentName:"ul"},"Standard mode by default"),(0,i.kt)("li",{parentName:"ul"},"Network (Low - Moderate performance)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"M6g:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Arm-based AWS Graviton2 processors"),(0,i.kt)("li",{parentName:"ul"},"EBS-optimized by default"),(0,i.kt)("li",{parentName:"ul"},"deliver up to 40% better price/performance over current generation M5 instances and offer a balance of compute, memory, and networking resources"),(0,i.kt)("li",{parentName:"ul"},"AWS Nitro System"),(0,i.kt)("li",{parentName:"ul"},"EBS or NVMe SSDs"),(0,i.kt)("li",{parentName:"ul"},"Network: 10~15Gbps"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"M5:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Latest generation of General Purpose Instances"),(0,i.kt)("li",{parentName:"ul"},"Network: 10-25Gbps"),(0,i.kt)("li",{parentName:"ul"},"Up to 3.1 GHz Intel Xeon\xae Platinum 8175M processors with new Intel Advanced Vector Extension (AVX-512) instruction set"),(0,i.kt)("li",{parentName:"ul"},"EBS or NVMe SSDs"),(0,i.kt)("li",{parentName:"ul"},"AWS Nitro System"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"M5a:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"General Purpose"),(0,i.kt)("li",{parentName:"ul"},"AMD EPYC 7000 series processors with an all core turbo clock speed of 2.5 GHz"),(0,i.kt)("li",{parentName:"ul"},"Network: 10-20Gbps"),(0,i.kt)("li",{parentName:"ul"},"EBS or NVMe SSDs"),(0,i.kt)("li",{parentName:"ul"},"AWS Nitro System"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"M5n:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"2nd generation Intel Xeon Scalable Processors (Cascade Lake) with a sustained all-core Turbo CPU frequency of 3.1 GHz and maximum single core turbo frequency of 3.5 GHz"),(0,i.kt)("li",{parentName:"ul"},"Support for the new Intel Vector Neural Network Instructions (AVX-512 VNNI) (for Machine Learning)"),(0,i.kt)("li",{parentName:"ul"},"Network: 25-100Gbps"),(0,i.kt)("li",{parentName:"ul"},"EBS or NVMe SSDs"),(0,i.kt)("li",{parentName:"ul"},"AWS Nitro System"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"M5zn:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"2nd Generation Intel Xeon Scalable Processors (Cascade Lake) with an all-core turbo frequency up to 4.5 GHz"),(0,i.kt)("li",{parentName:"ul"},"Network 25-100Gbps"),(0,i.kt)("li",{parentName:"ul"},"High single thread performance"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"M4:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"2.3 GHz Intel Xeon\xae E5-2686 v4 (Broadwell) processors or 2.4 GHz Intel Xeon\xae E5-2676 v3 (Haswell) processors"),(0,i.kt)("li",{parentName:"ul"},"EBS-optimized by default"),(0,i.kt)("li",{parentName:"ul"},"Network: Moderate - 25Gbps"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"A1:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Custom built AWS Graviton Processor with 64-bit Arm Neoverse cores"),(0,i.kt)("li",{parentName:"ul"},"Network: Up to 10Gbps"),(0,i.kt)("li",{parentName:"ul"},"EBS-optimized by default"),(0,i.kt)("li",{parentName:"ul"},"AWS Nitro System"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Compute optimized: C instances"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Usecase: scientific modeling, dedicated game servers, and server engines"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Memory optimized: R, X instances"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Usecase: real-time big data analytics, in-memory cache, in-memory databases"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Accelerated computing: P4, P3, P2, Inf1, G4dn, G4ad, G3, F1"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Usecase: machine learning, speech recognization, compute finance, ..."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Storage optimized: I, D, H instances"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Usecase: NoSQL, in-memory or transaction databases, data warehouse, ..."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Burstable"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Burstable:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Traditional Amazon EC2 instance types provide fixed CPU utilization, while burstable performance instances provide a baseline level of CPU utilization with the ability to burst CPU utilization above the baseline level."),(0,i.kt)("li",{parentName:"ul"},"The baseline utilization and ability to burst are governed by CPU credits."),(0,i.kt)("li",{parentName:"ul"},"If a burstable performance instance uses fewer CPU resources than is required for baseline utilization (such as when it is idle), the unspent CPU credits are accrued in the CPU credit balance. If a burstable performance instance needs to burst above the baseline utilization level, it spends the accrued credits. The more credits that a burstable performance instance has accrued, the more time it can burst beyond its baseline when more CPU utilization is needed."))),(0,i.kt)("li",{parentName:"ul"},"CPU credits: The following scenarios all use one CPU credit",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"One vCPU at 100% utilization for one minute"),(0,i.kt)("li",{parentName:"ul"},"One vCPU at 50% utilization for two minutes"),(0,i.kt)("li",{parentName:"ul"},"Two vCPUs at 25% utilization for two minutes"))),(0,i.kt)("li",{parentName:"ul"},"EBS-optimized:"),(0,i.kt)("li",{parentName:"ul"},"Unlimited mode:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"A burstable performance instance configured as ",(0,i.kt)("inlineCode",{parentName:"li"},"unlimited")," can sustain high CPU utilization for any period of time whenever required."),(0,i.kt)("li",{parentName:"ul"},"Charges might apply if your average utilization over a rolling 24-hour period exceeds the baseline utilization of the instance.")))))),(0,i.kt)("h2",{id:"instance-profile"},"Instance Profile"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Recommend over embeded credentials"),(0,i.kt)("li",{parentName:"ul"},"IAM Policy ---\x3e IAM Role ---\x3e Instance profile <--- EC2 Instance")),(0,i.kt)("h2",{id:"placement-groups"},"Placement groups"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Are logical placement"),(0,i.kt)("li",{parentName:"ul"},"Cluster:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Pack instances together inside a AZ"),(0,i.kt)("li",{parentName:"ul"},"Low-latency for tightly coupled note-to-node communication"),(0,i.kt)("li",{parentName:"ul"},"Cannot be multi AZ"),(0,i.kt)("li",{parentName:"ul"},"Well suited for HPC applications"))),(0,i.kt)("li",{parentName:"ul"},"Partition:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Spread across logical partitions (inside a AZ ?)"),(0,i.kt)("li",{parentName:"ul"},"Each partition does not share the same hardware with each other (rack per partition)"),(0,i.kt)("li",{parentName:"ul"},"Well suited for distributed and replicated workloads"))),(0,i.kt)("li",{parentName:"ul"},"Spread",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Each instance is placed on a different rack"),(0,i.kt)("li",{parentName:"ul"},"Critical instances should be keep seperated from each other"),(0,i.kt)("li",{parentName:"ul"},"Up to 7 instances"),(0,i.kt)("li",{parentName:"ul"},"Can be multi AZ")))),(0,i.kt)("h2",{id:"user-data"},"User data"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"A script that run when lauching an instance (only first launch, restarting will not trigger the execution by default)"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Can be configured to be executed on restart: ",(0,i.kt)("a",{parentName:"li",href:"https://aws.amazon.com/premiumsupport/knowledge-center/execute-user-data-ec2/"},"link")," (the example use mime-multi part file)")),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-txt"},'Content-Type: multipart/mixed; boundary="//"\nMIME-Version: 1.0\n\n--//\nContent-Type: text/cloud-config; charset="us-ascii"\nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename="cloud-config.txt"\n\n#cloud-config\ncloud_final_modules:\n- [scripts-user, always]\n\n--//\nContent-Type: text/x-shellscript; charset="us-ascii"\nMIME-Version: 1.0\nContent-Transfer-Encoding: 7bit\nContent-Disposition: attachment; filename="userdata.txt"\n\n#!/bin/bash\n/bin/echo "Hello World" >> /tmp/testfile.txt\n--//\n'))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"User data is executed as ",(0,i.kt)("inlineCode",{parentName:"p"},"root")," by default")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Debug (on Amazon AMI Linux 2)"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"tail -f /var/log/cloud-init-output.log\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-log"},"Jun 10 09:38:21 cloud-init[3233]: util.py[WARNING]: Failed running /var/lib/cloud/instance/scripts/part-001 [1]\nJun 10 09:38:21 cloud-init[3233]: cc_scripts_user.py[WARNING]: Failed to run module scripts-user (scripts in /var/lib/cloud/instance/scripts)\nJun 10 09:38:21 cloud-init[3233]: util.py[WARNING]: Running module scripts-user (<module 'cloudinit.config.cc_scripts_user' from '/usr/lib/python2.7/site-packages/cloudinit/config/cc_scripts_user.pyc'>) failed\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-log"},"Cloud-init v. 19.3-43.amzn2 finished at Thu, 10 Jun 2021 09:43:39 +0000. Datasource DataSourceEc2.  Up 11.33 seconds\n")),(0,i.kt)("h2",{id:"metadata"},"Metadata"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"curl http://169.254.169.254/latest/meta-data\n")),(0,i.kt)("h2",{id:"purchase-options"},"Purchase options"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Standard (On-Demand)"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Short workload"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Reserved:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Reserved Instances: Long workload (1 year or 3 years)"),(0,i.kt)("li",{parentName:"ul"},"Convertible Reserved Instances: Long workload with flexible instances (instance type is changable)"),(0,i.kt)("li",{parentName:"ul"},"Scheduled Reserved Instances: scheduled"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Spot instances"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Short workload"),(0,i.kt)("li",{parentName:"ul"},"Can lose instances (less reliable)"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Dedicated Hosts:"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Book entire server/placement. Full control"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Dedicated Instances:")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"EBS Volume is a network drive (attach through network, not physical drive) which can be attached to instances while they run"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Has latency"),(0,i.kt)("li",{parentName:"ul"},"Can be detached and attached to another instance")))),(0,i.kt)("h2",{id:"elastic-block-store-ebs"},"Elastic Block Store (EBS)"),(0,i.kt)("h3",{id:"ebs"},"EBS"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Allow data persistence (after instance termination)"),(0,i.kt)("li",{parentName:"ul"},"EBS are bound to availability zone"),(0,i.kt)("li",{parentName:"ul"},"Capacity: size in GBs, IOPS (I/O per second)"),(0,i.kt)("li",{parentName:"ul"},"When launch an instance, root volume is deleted on termination by default (can be unchecked), other volumes are not"),(0,i.kt)("li",{parentName:"ul"},"Has limited performance"),(0,i.kt)("li",{parentName:"ul"},"Pay for provision")),(0,i.kt)("h4",{id:"snapshot"},"Snapshot"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"A backup of EBS at a point of time"),(0,i.kt)("li",{parentName:"ul"},"Recommend to detach EBS before snapshot (not necessary)"),(0,i.kt)("li",{parentName:"ul"},"Can be copied across AZ and region")),(0,i.kt)("h4",{id:"ami"},"AMI"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Amazon Machine Images"),(0,i.kt)("li",{parentName:"ul"},"Pre-package softwares for faster boot, monitoring, ...")),(0,i.kt)("h4",{id:"types"},"Types"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"gp2/gp3 (SSD): General Purpose",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Cost effective, low latency"),(0,i.kt)("li",{parentName:"ul"},"1GB - 1TB"),(0,i.kt)("li",{parentName:"ul"},"Limited performance:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Small gp2 can burst to 3000 IOPS"),(0,i.kt)("li",{parentName:"ul"},"Size and IOPS are linked, max is 16000 IOPS"))),(0,i.kt)("li",{parentName:"ul"},"gp3: Newer generation, IOPS and throughput can be increased independently"))),(0,i.kt)("li",{parentName:"ul"},"io1/io2 (SSD): Low-latency, high-throughput workloads",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"io2:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Recommended. Same price as io1 but higher durability and IOPS"),(0,i.kt)("li",{parentName:"ul"},"Sub-milisecond latency"))),(0,i.kt)("li",{parentName:"ul"},"Support EBS multi-attach"))),(0,i.kt)("li",{parentName:"ul"},"st1 (HDD): Throughput optimized. Frequently accessed"),(0,i.kt)("li",{parentName:"ul"},"sc1 (HHD): Cold HDD. Less frequently accessed")),(0,i.kt)("p",null,"Only SSD-type EBS can be used as boot volume"),(0,i.kt)("h3",{id:"ec2-instance-store"},"EC2 Instance Store"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"High performance hardware disk"),(0,i.kt)("li",{parentName:"ul"},"Connect directly to the server (physical connection)"),(0,i.kt)("li",{parentName:"ul"},"Lose the storage when stop (ephemeral storage). Risk of data lost when hardware fails"),(0,i.kt)("li",{parentName:"ul"},"Usecase: Buffer, cache, temporary content, ...")),(0,i.kt)("h3",{id:"multi-attach"},"Multi-attach"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Attach the same EBS volume to multiple EC2 instances in the same AZ"),(0,i.kt)("li",{parentName:"ul"},"Only works on io1/io2 family volume"),(0,i.kt)("li",{parentName:"ul"},"Each instance has full read/write permission on the volume"),(0,i.kt)("li",{parentName:"ul"},"Filesystem must be cluster-aware (not XFS, EX4, ...)")),(0,i.kt)("h2",{id:"elastic-file-system-efs"},"Elastic File System (EFS)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Network file system that can be mounted on many EC2 instances")),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Compatible with Linux based AMI only"))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Works on multi AZ"),(0,i.kt)("li",{parentName:"ul"},"Grow to petabyte-scale automatically"),(0,i.kt)("li",{parentName:"ul"},"Expensive (3x gp2). Pay for actual usage")),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"EFS-IA (Infrequently Accessed) for cost savings"))),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"NFSv4.1 protocol"),(0,i.kt)("li",{parentName:"ul"},"Use security group to control access to EFS"),(0,i.kt)("li",{parentName:"ul"},"Encryption at reset using KMS"),(0,i.kt)("li",{parentName:"ul"},"Performance:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"General Purpose: Latency-sensitive"),(0,i.kt)("li",{parentName:"ul"},"Max I/O: higher latency, throughput, highly parallel"),(0,i.kt)("li",{parentName:"ul"},"Bursting mode")))))}m.isMDXComponent=!0}}]);