---
title: AWS Simple Storage Service
code: N/A
---

## Overview

- Object-based
  - Storage that manages data as objects
  - Other architectures:
    - File system: manage data as files and file hierarchy
    - Block storage: manage data as blocks within sectors and tracks
- Serverless, unlimited storage
- Bucket name must be globally unique
  - 3-63 length
  - No uppercase, underscore, IP
  - Start with lowercase letter or number
- S3 object:
  - Key: **path** to the file
    - **Object name** only: s3://bucket/**file.txt**
    - _Prefix_ + **object name**: s3://bucket/_path/to/the/_**file.txt**
  - Value: the value itself made up of a sequence of bytes
  - Version ID (if versioning is enabled)
  - Metadata
  - Tag: useful for security, life cycle
  - Size: 0B - 5TB
    - Uploadable: <= 5GB. Otherwise multi-part upload (Recommend for > 100MB)
- S3 console is not region specific, but the bucket is.

## S3 Classes

- Trade Retrieval Time, Accessibility, Durability for cheaper storage

| Tier                         | Features                                                                                                              |
| ---------------------------- | --------------------------------------------------------------------------------------------------------------------- |
| Standard                     | Fast. 99.99% Availability. 11 9's Durability. Replicated across at least 3 AZs                                        |
| Intelligence                 | Data is moved to the most cost-effective tier without impact to performance, overhead. Using ML                       |
| Standard Infrequently Access | Still Fast. Cheaper if access < 1 time / month, or additional retrieval fees applied. Overall -50% than Standard      |
| One Zone IA                  | Still Fast. 1 AZ. 99.5% Availability. Data could be destroyed. Retrieval fee is applied. 20% Cheaper than Standard IA |
| Glacier                      | Long-term cold storage. Retrieval time can take a minute to hours. >=3 AZs                                            |
| Glacier Deep Archive         | Data retrieval time is 12 hours                                                                                       |

- All 11 9's Durability

## Versioning

- Once enabled, it can be suspended only.
- Store all versions of objects in S3
- Delete objects will leave a **Delete marker** on them
  - Delete the marker to restore the objects
- Delete a version or a delete marker will be permanent delete
- All versions are kept after suspending versioning
  - New objects will have null version id

## Encryption

- Encrypted at rest
  - SSE-S3: Key managed by S3
    - Require header `x-amz-server-side-encryption=AES256` when uploading
  - SSE-KMS: Key managed by KMS
    - S3 default key or CMK
    - Require header `x-amz-server-side-encryption=aws:kms` when uploading
  - SSE-C: Key managed by customer
    - HTTPS is required
    - Key must be provided in every requests header
- Client Side encryption:
  - Client must encrypt/decrypt data
  - Keys are fully managed by customer
- Encryption in transit: SSL/TLS

  - HTTPS endpoint: encryption in flight
  - HTTP endpoint: raw
  - SSE-C: Must use HTTPS

- KMS can block S3 performance
  - KMS: 5500/10000/30000 request per second
  - S3: 5500 GET, 3500 PUT/DELETE per prefix per second

## Security

- Private by default
  - Presigned URL: Generate URL to grant temporary access (get or put) to private objects
- Logging can be enabled, and stored in another bucket
- Access control is configured using ACL (legacy but not deprecated) and Bucket Policies (IAM)
- Instance without www network can access S3 through VPC Endpoints
- MFA delete
  - Versioning must be enabled
  - MFA is required to delete object
  - Requires CLI

## Data consistency

- Strong consistency as of Dec 2020. New data reflects after any operation
- No additional cost

## Replication

- Support both cross-region or same-region
- When enabled, new objects are replicated automatically
  - Replicating existing objects requires contacting to AWS Support
- Higher availability, durability
- Versioning must be turned on (on both buckets)
- Replication rule:
  - Apply for new creation object or not
  - IAM (grant permissions for buckets)
- No replication chain

## Life cycle management

- Move object to another storage class automatically after some period of time
- Auto delete access log after a 365 days
- Can be used to delete object or versions (versioning enabled)
- Delete incompleting multi-part uploads
- Rule can be created for a specific prefix

## Transfer Acceleration

- Use for download/upload, compatible with multi-part upload

- Upload to Edge Location's distinct URL instead of uploading to S3 directly, CloudFront EL will forward to S3

  Edge location route the file to S3 using AWS backbone network (optimized)

## Byte-range fetches

- Optimize download

- Download specific byte-range instead of fullsize file (parallel download)
