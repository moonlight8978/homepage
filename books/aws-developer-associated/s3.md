---
title: AWS Simple Storage Service
code: N/A
---

## Overview

- Object-based
  - Storage that manages data as objects
  - Other architectures:
    - File system: manage data as files and file hierarchy
    - Block storage: manage data as blocks within sectors and tracks
- Serverless, unlimited storage
- Bucket name must be globally unique
  - 3-63 length
  - No uppercase, underscore, IP
  - Start with lowercase letter or number
- S3 object:
  - Key: **path** to the file
    - **Object name** only: s3://bucket/**file.txt**
    - _Prefix_ + **object name**: s3://bucket/_path/to/the/_**file.txt**
  - Value: the value itself made up of a sequence of bytes
  - Version ID (if versioning is enabled)
  - Metadata
  - Tag: useful for security, life cycle
  - Size: 0B - 5TB
    - Uploadable: <= 5GB. Otherwise multi-part upload
- S3 console is not region specific, but the bucket is.

## S3 Classes

- Trade Retrieval Time, Accessibility, Durability for cheaper storage

| Tier                         | Features                                                                                                              |
| ---------------------------- | --------------------------------------------------------------------------------------------------------------------- |
| Standard                     | Fast. 99.99% Availability. 11 9's Durability. Replicated across at least 3 AZs                                        |
| Intelligence                 | Data is moved to the most cost-effective tier without impact to performance, overhead. Using ML                       |
| Standard Infrequently Access | Still Fast. Cheaper if access < 1 time / month, or additional retrieval fees applied. Overall -50% than Standard      |
| One Zone IA                  | Still Fast. 1 AZ. 99.5% Availability. Data could be destroyed. Retrieval fee is applied. 20% Cheaper than Standard IA |
| Glacier                      | Long-term cold storage. Retrieval time can take a minute to hours. >=3 AZs                                            |
| Glacier Deep Archive         | Data retrieval time is 12 hours                                                                                       |

- All 11 9's Durability

## Versioning

- Once enabled, it can be suspended only.
- Store all versions of objects in S3
- Delete objects will leave a **Delete marker** on them
  - Delete the marker to restore the objects
- Delete a version or a delete marker will be permanent delete
- All versions are kept after suspending versioning
  - New objects will have null version id

## Encryption

- Encrypted at rest
  - SSE-S3: Key managed by S3
    - Require header `x-amz-server-side-encryption=AES256` when uploading
  - SSE-KMS: Key managed by KMS
    - S3 default key or CMK
    - Require header `x-amz-server-side-encryption=aws:kms` when uploading
  - SSE-C: Key managed by customer
    - HTTPS is required
    - Key must be provided in every requests header
- Client Side encryption:
  - Client must encrypt/decrypt data
  - Keys are fully managed by customer
- Encryption in transit: SSL/TLS
  - HTTPS endpoint: encryption in flight
  - HTTP endpoint: raw
  - SSE-C: Must use HTTPS

## Security

- Private by default
  - Presigned URL: Generate URL to grant temporary access (get or put) to private objects
- Logging can be enabled, and stored in another bucket
- Access control is configured using ACL (legacy but not deprecated) and Bucket Policies (IAM)
- Instance without www network can access S3 through VPC Endpoints
- MFA delete
  - Versioning must be enabled
  - MFA is required to delete object

## Data consistency

- Strong consistency as of Dec 2020. New data reflects after any operation
- No additional cost

## Cross region replication (CRR)

- When enabled, objects are replicated automatically
- Higher availability, durability
- Versioning must be turned on (on both buckets)
- Replication rule:
  - Apply for new creation object or not
  - IAM (grant permissions for buckets)
- Replicating existing objects requires contacting to AWS Support

## Life cycle management

- Automate the process of moving objects to another storage class, and deleting objects
- Can be used with versioning, can be applied to both current and previous versions

## Transfer Acceleration

- Fast & secure transfer objects to end users, utilizes CloudFront's edge location

- Upload to Edge Location's distinct URL instead of uploading to S3 directly.

  Edge location route the file to S3 using AWS backbone network (optimized)
